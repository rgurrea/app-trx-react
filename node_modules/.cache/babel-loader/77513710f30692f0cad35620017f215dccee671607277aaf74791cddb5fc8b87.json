{"ast":null,"code":"import React,{useState,useEffect}from'react';import imgCar from'../../resources/Comfort_Premium.png';import io from'socket.io-client';// Configura el cliente Socket.io para conectarse al servidor en localhost:3006\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('https://www.api.merakimx.mx/gpd/vehicle');function VehicleList(_ref){let{onSelectVehicle}=_ref;const[vehicles,setVehicles]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[page,setPage]=useState(1);// Página inicial\nuseEffect(()=>{fetchData();socket.on('vehicleUpdate',deletedAdId=>{setVehicles(prevVehicles=>prevVehicles.filter(vehicle=>vehicle._id!==parseInt(deletedAdId)));});return()=>{socket.off('vehicleUpdate');};},[page]);// Escuchar cambios en la página\nconst fetchData=async()=>{try{const response=await fetch(\"https://www.api.merakimx.mx/gpd/vehicle/ads?page=\".concat(page));if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setVehicles(data);}catch(error){console.error('Error fetching data:',error);}};const handleSearchChange=event=>{setSearchTerm(event.target.value.toLowerCase());setPage(1);// Restablecer la página a 1 cuando cambie el término de búsqueda\n};const handleNextPage=()=>{setPage(page+1);};const handlePrevPage=()=>{setPage(page-1);};const filteredVehicles=vehicles.filter(vehicle=>vehicle.BRAND&&vehicle.BRAND.toLowerCase().includes(searchTerm)||vehicle.MODEL&&vehicle.MODEL.toLowerCase().includes(searchTerm)||vehicle.YEAR&&vehicle.YEAR.toString().includes(searchTerm)||vehicle.COLOR&&vehicle.COLOR.toLowerCase().includes(searchTerm)||vehicle.vim&&vehicle.vim.toLowerCase().includes(searchTerm));const handleSelectVehicle=vehicle=>{onSelectVehicle(vehicle);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:'30px',maxHeight:'600px',overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista de Veh\\xEDculos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar...\",onChange:handleSearchChange,style:{marginBottom:'20px',width:'98%',height:'25px'}}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:filteredVehicles.map(vehicle=>/*#__PURE__*/_jsx(\"li\",{style:{margin:'10px 0',width:'100%',marginBottom:' 8%',height:\"100px\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSelectVehicle(vehicle),style:{padding:'5px 10px',border:'1px solid #ccc',borderRadius:'5px',cursor:'pointer',backgroundColor:'#f0f0f0',display:'flex',alignItems:'center',width:'100%',background:'white'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:'1',minWidth:'30%'},children:/*#__PURE__*/_jsx(\"img\",{src:imgCar,alt:\"Vehicle\",style:{width:'100px',height:'100px'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',minWidth:'70%',paddingLeft:'10px',alignItems:'flex-start',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',margin:0,textAlign:'left',marginBottom:'5px'},children:/*#__PURE__*/_jsxs(\"strong\",{children:[vehicle.BRAND,\" \",vehicle.MODEL,\" \",vehicle.YEAR]})}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Color:\"}),\" \",vehicle.COLOR]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"VIN:\"}),\" \",vehicle.vim]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Seguro:\"}),\" \",vehicle.seguro]})]})]})})},vehicle._id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:page===1,children:\"Anterior\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,children:\"Siguiente\"})]})]});}export default VehicleList;","map":{"version":3,"names":["React","useState","useEffect","imgCar","io","jsx","_jsx","jsxs","_jsxs","socket","VehicleList","_ref","onSelectVehicle","vehicles","setVehicles","searchTerm","setSearchTerm","page","setPage","fetchData","on","deletedAdId","prevVehicles","filter","vehicle","_id","parseInt","off","response","fetch","concat","ok","Error","data","json","error","console","handleSearchChange","event","target","value","toLowerCase","handleNextPage","handlePrevPage","filteredVehicles","BRAND","includes","MODEL","YEAR","toString","COLOR","vim","handleSelectVehicle","children","style","margin","maxHeight","overflowY","type","placeholder","onChange","marginBottom","width","height","listStyle","padding","map","onClick","border","borderRadius","cursor","backgroundColor","display","alignItems","background","flexDirection","flex","minWidth","src","alt","paddingLeft","justifyContent","fontSize","textAlign","seguro","marginTop","disabled"],"sources":["/Users/rodrigo/Desktop/traxiapp/src/components/vehicle/vehicleList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport imgCar from '../../resources/Comfort_Premium.png';\nimport io from 'socket.io-client';\n\n// Configura el cliente Socket.io para conectarse al servidor en localhost:3006\nconst socket = io('https://www.api.merakimx.mx/gpd/vehicle');\n\nfunction VehicleList({ onSelectVehicle }) {\n    const [vehicles, setVehicles] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [page, setPage] = useState(1); // Página inicial\n\n    useEffect(() => {\n        fetchData();\n        socket.on('vehicleUpdate', (deletedAdId) => {\n            setVehicles(prevVehicles => prevVehicles.filter(vehicle => vehicle._id !== parseInt(deletedAdId)));\n        });\n        return () => {\n            socket.off('vehicleUpdate');\n        };\n    }, [page]); // Escuchar cambios en la página\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch(`https://www.api.merakimx.mx/gpd/vehicle/ads?page=${page}`);\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            setVehicles(data);\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    };\n\n    const handleSearchChange = (event) => {\n        setSearchTerm(event.target.value.toLowerCase());\n        setPage(1); // Restablecer la página a 1 cuando cambie el término de búsqueda\n    };\n\n    const handleNextPage = () => {\n        setPage(page + 1);\n    };\n\n    const handlePrevPage = () => {\n        setPage(page - 1);\n    };\n\n    const filteredVehicles = vehicles.filter((vehicle) =>\n        (vehicle.BRAND && vehicle.BRAND.toLowerCase().includes(searchTerm)) ||\n        (vehicle.MODEL && vehicle.MODEL.toLowerCase().includes(searchTerm)) ||\n        (vehicle.YEAR && vehicle.YEAR.toString().includes(searchTerm)) ||\n        (vehicle.COLOR && vehicle.COLOR.toLowerCase().includes(searchTerm)) ||\n        (vehicle.vim && vehicle.vim.toLowerCase().includes(searchTerm))\n    );\n\n    const handleSelectVehicle = (vehicle) => {\n        onSelectVehicle(vehicle);\n    };\n\n    return (\n        <div>\n\n            <div style={{ margin: '30px', maxHeight: '600px', overflowY: 'auto' }}>\n                <h2>Lista de Vehículos</h2>\n                <input type=\"text\" placeholder=\"Buscar...\" onChange={handleSearchChange} style={{ marginBottom: '20px', width: '98%', height: '25px' }} />\n                <ul style={{ listStyle: 'none', padding: 0 }}>\n                    {filteredVehicles.map(vehicle => (\n                        <li key={vehicle._id} style={{ margin: '10px 0', width: '100%', marginBottom: ' 8%', height: \"100px\" }}>\n                            <button onClick={() => handleSelectVehicle(vehicle)} style={{ padding: '5px 10px', border: '1px solid #ccc', borderRadius: '5px', cursor: 'pointer', backgroundColor: '#f0f0f0', display: 'flex', alignItems: 'center', width: '100%', background: 'white' }}>\n                                <div style={{ display: 'flex', flexDirection: 'row', width: '100%' }}>\n                                    <div style={{ flex: '1', minWidth: '30%' }}>\n                                        <img src={imgCar} alt=\"Vehicle\" style={{ width: '100px', height: '100px' }} />\n                                    </div>\n                                    <div style={{ flex: '1', minWidth: '70%', paddingLeft: '10px', alignItems: 'flex-start', justifyContent: 'flex-start' }}>\n                                        <div style={{ fontSize: '18px', margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                            <strong>{vehicle.BRAND} {vehicle.MODEL} {vehicle.YEAR}</strong>\n                                        </div>\n                                        <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                            <strong>Color:</strong> {vehicle.COLOR}\n                                        </div>\n                                        <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                            <strong>VIN:</strong> {vehicle.vim}\n                                        </div>\n                                        <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                            <strong>Seguro:</strong> {vehicle.seguro}\n                                        </div>\n                                    </div>\n                                </div>\n                            </button>\n                        </li>\n                    ))}\n                </ul>\n\n            </div>\n            <div style={{ marginTop: '20px', textAlign: 'center' }}>\n                {/* Botón de página anterior */}\n                <button onClick={handlePrevPage} disabled={page === 1}>Anterior</button>\n                {/* Botón de página siguiente */}\n                <button onClick={handleNextPage}>Siguiente</button>\n            </div>\n        </div>\n\n    );\n}\n\nexport default VehicleList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}