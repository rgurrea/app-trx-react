{"ast":null,"code":"import React from'react';import{MapContainer,TileLayer,Marker,Popup,useMap}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';import carIconImg from'../../car.svg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Mapa(_ref){let{vehicles}=_ref;const carIcon=L.icon({iconUrl:carIconImg,iconSize:[32,32]});const TrazarRutas=_ref2=>{let{vehiculos}=_ref2;const map=useMap();// Eliminar todas las capas de rutas existentes antes de trazar nuevas\nmap.eachLayer(layer=>{if(layer instanceof L.Polyline){map.removeLayer(layer);}});if(vehiculos&&vehiculos.length){vehiculos.forEach(vehiculo=>{const{init,end}=vehiculo;const polyline=L.polyline([init,end],{color:'blue'}).addTo(map);map.fitBounds(polyline.getBounds());});}return null;};return/*#__PURE__*/_jsxs(MapContainer,{center:[19.5,-99.14946],zoom:13,style:{height:'400px',width:'auto',margin:'33px'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(TrazarRutas,{vehiculos:vehicles}),vehicles&&vehicles.length>0&&vehicles.map(vehiculo=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Marker,{position:vehiculo.init,icon:carIcon,children:/*#__PURE__*/_jsxs(Popup,{children:[\"Inicio - \",/*#__PURE__*/_jsxs(\"strong\",{children:[vehiculo&&vehiculo.BRAND,\" \",vehiculo&&vehiculo.MODEL,\" \",vehiculo&&vehiculo.BRAND]}),\"Placa: \",/*#__PURE__*/_jsx(\"strong\",{children:vehiculo&&vehiculo.placa})]})}),/*#__PURE__*/_jsx(Marker,{position:vehiculo.end,icon:carIcon,children:/*#__PURE__*/_jsxs(Popup,{children:[\"Fin - \",/*#__PURE__*/_jsxs(\"strong\",{children:[vehiculo&&vehiculo.BRAND,\" \",vehiculo&&vehiculo.MODEL,\" \",vehiculo&&vehiculo.BRAND]}),\"Placa: \",/*#__PURE__*/_jsx(\"strong\",{children:vehiculo&&vehiculo.placa})]})})]},vehiculo._id))]});}export default Mapa;","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Popup","useMap","L","carIconImg","jsx","_jsx","jsxs","_jsxs","Mapa","_ref","vehicles","carIcon","icon","iconUrl","iconSize","TrazarRutas","_ref2","vehiculos","map","eachLayer","layer","Polyline","removeLayer","length","forEach","vehiculo","init","end","polyline","color","addTo","fitBounds","getBounds","center","zoom","style","height","width","margin","children","url","position","BRAND","MODEL","placa","_id"],"sources":["/Users/rodrigo/Desktop/traxiapp/src/components/maps/Mapa.js"],"sourcesContent":["import React from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport carIconImg from '../../car.svg';\n\nfunction Mapa({ vehicles }) {\n    const carIcon = L.icon({\n        iconUrl: carIconImg,\n        iconSize: [32, 32],\n    });\n\n    const TrazarRutas = ({ vehiculos }) => {\n        const map = useMap();\n\n        // Eliminar todas las capas de rutas existentes antes de trazar nuevas\n        map.eachLayer(layer => {\n            if (layer instanceof L.Polyline) {\n                map.removeLayer(layer);\n            }\n        });\n\n        if (vehiculos && vehiculos.length) {\n            vehiculos.forEach(vehiculo => {\n                const { init, end } = vehiculo;\n                const polyline = L.polyline([init, end], { color: 'blue' }).addTo(map);\n                map.fitBounds(polyline.getBounds());\n            });\n\n        }\n\n        return null;\n    };\n\n    return (\n        <MapContainer center={[19.5, -99.14946]} zoom={13} style={{ height: '400px', width: 'auto', margin: '33px' }}>\n            <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n\n            <TrazarRutas vehiculos={vehicles} />\n            {vehicles && vehicles.length > 0 && vehicles.map(vehiculo => (\n                <div key={vehiculo._id}>\n                    <Marker position={vehiculo.init} icon={carIcon}>\n                        <Popup>\n                            Inicio - <strong>{vehiculo && vehiculo.BRAND} {vehiculo && vehiculo.MODEL} {vehiculo && vehiculo.BRAND}</strong>\n                            Placa: <strong>{vehiculo && vehiculo.placa}</strong>\n                        </Popup>\n                    </Marker>\n                    <Marker position={vehiculo.end} icon={carIcon}>\n                        <Popup>\n                            Fin - <strong>{vehiculo && vehiculo.BRAND} {vehiculo && vehiculo.MODEL} {vehiculo && vehiculo.BRAND}</strong>\n                            Placa: <strong>{vehiculo && vehiculo.placa}</strong>\n                        </Popup>\n                    </Marker>\n                </div>\n            ))}\n        </MapContainer>\n    );\n}\n\nexport default Mapa;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}