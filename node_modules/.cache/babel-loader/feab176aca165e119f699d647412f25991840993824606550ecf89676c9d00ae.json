{"ast":null,"code":"import React,{useState,useEffect}from'react';import imgCar from'../../resources/Comfort_Premium.png';import io from'socket.io-client';// Configura el cliente Socket.io para conectarse al servidor en localhost:3006\n//const socket = io('http://localhost:3006');\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('https://www.api.merakimx.mx',{path:'/gpd/vehicle'});function VehicleList(_ref){let{onSelectVehicle}=_ref;const[vehicles,setVehicles]=useState([]);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchData();// Escucha el evento 'adDeleted' para actualizar la lista de vehículos cuando se elimina un vehículo\nsocket.on('vehicleUpdate',deletedAdId=>{setVehicles(prevVehicles=>prevVehicles.filter(vehicle=>vehicle._id!==parseInt(deletedAdId)));});// Limpia el oyente cuando el componente se desmonta\nreturn()=>{socket.off('vehicleUpdate');};},[]);const fetchData=async()=>{try{const response=await fetch('https://www.api.merakimx.mx/gpd/vehicle/ads?page=1');if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setVehicles(data);}catch(error){console.error('Error fetching data:',error);}};const handleSearchChange=event=>{setSearchTerm(event.target.value.toLowerCase());};const filteredVehicles=vehicles.filter(vehicle=>vehicle.BRAND&&vehicle.BRAND.toLowerCase().includes(searchTerm)||vehicle.MODEL&&vehicle.MODEL.toLowerCase().includes(searchTerm)||vehicle.YEAR&&vehicle.YEAR.toString().includes(searchTerm)||vehicle.COLOR&&vehicle.COLOR.toLowerCase().includes(searchTerm)||vehicle.vim&&vehicle.vim.toLowerCase().includes(searchTerm));const handleSelectVehicle=vehicle=>{onSelectVehicle(vehicle);};return/*#__PURE__*/_jsxs(\"div\",{style:{margin:'30px',maxHeight:'600px',overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista de Veh\\xEDculos\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar...\",onChange:handleSearchChange,style:{marginBottom:'20px',width:'98%',height:'25px'}}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:filteredVehicles.map(vehicle=>/*#__PURE__*/_jsx(\"li\",{style:{margin:'10px 0',width:'100%',marginBottom:' 8%',height:\"100px\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSelectVehicle(vehicle),style:{padding:'5px 10px',border:'1px solid #ccc',borderRadius:'5px',cursor:'pointer',backgroundColor:'#f0f0f0',display:'flex',alignItems:'center',width:'100%',background:'white'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:'1',minWidth:'30%'},children:/*#__PURE__*/_jsx(\"img\",{src:imgCar,alt:\"Vehicle\",style:{width:'100px',height:'100px'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',minWidth:'70%',paddingLeft:'10px',alignItems:'flex-start',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',margin:0,textAlign:'left',marginBottom:'5px'},children:/*#__PURE__*/_jsxs(\"strong\",{children:[vehicle.BRAND,\" \",vehicle.MODEL,\" \",vehicle.YEAR]})}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Color:\"}),\" \",vehicle.COLOR]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"VIN:\"}),\" \",vehicle.vim]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,textAlign:'left',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Seguro:\"}),\" \",vehicle.seguro]})]})]})})},vehicle.id))})]});}export default VehicleList;","map":{"version":3,"names":["React","useState","useEffect","imgCar","io","jsx","_jsx","jsxs","_jsxs","socket","path","VehicleList","_ref","onSelectVehicle","vehicles","setVehicles","searchTerm","setSearchTerm","fetchData","on","deletedAdId","prevVehicles","filter","vehicle","_id","parseInt","off","response","fetch","ok","Error","data","json","error","console","handleSearchChange","event","target","value","toLowerCase","filteredVehicles","BRAND","includes","MODEL","YEAR","toString","COLOR","vim","handleSelectVehicle","style","margin","maxHeight","overflowY","children","type","placeholder","onChange","marginBottom","width","height","listStyle","padding","map","onClick","border","borderRadius","cursor","backgroundColor","display","alignItems","background","flexDirection","flex","minWidth","src","alt","paddingLeft","justifyContent","fontSize","textAlign","seguro","id"],"sources":["/Users/rodrigo/Desktop/traxiapp/src/components/vehicle/vehicleList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport imgCar from '../../resources/Comfort_Premium.png';\nimport io from 'socket.io-client';\n\n// Configura el cliente Socket.io para conectarse al servidor en localhost:3006\n\n//const socket = io('http://localhost:3006');\nconst socket = io('https://www.api.merakimx.mx', { path: '/gpd/vehicle'});\nfunction VehicleList({ onSelectVehicle }) {\n    const [vehicles, setVehicles] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        fetchData();\n        // Escucha el evento 'adDeleted' para actualizar la lista de vehículos cuando se elimina un vehículo\n        socket.on('vehicleUpdate', (deletedAdId) => {\n            setVehicles(prevVehicles => prevVehicles.filter(vehicle => vehicle._id !== parseInt(deletedAdId)));\n        });\n        // Limpia el oyente cuando el componente se desmonta\n        return () => {\n            socket.off('vehicleUpdate');\n        };\n    }, []);\n\n    const fetchData = async () => {\n        try {\n            const response = await fetch('https://www.api.merakimx.mx/gpd/vehicle/ads?page=1');\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            setVehicles(data);\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    };\n\n    const handleSearchChange = (event) => {\n        setSearchTerm(event.target.value.toLowerCase());\n    };\n\n    const filteredVehicles = vehicles.filter((vehicle) =>\n        (vehicle.BRAND && vehicle.BRAND.toLowerCase().includes(searchTerm)) ||\n        (vehicle.MODEL && vehicle.MODEL.toLowerCase().includes(searchTerm)) ||\n        (vehicle.YEAR && vehicle.YEAR.toString().includes(searchTerm)) ||\n        (vehicle.COLOR && vehicle.COLOR.toLowerCase().includes(searchTerm)) ||\n        (vehicle.vim && vehicle.vim.toLowerCase().includes(searchTerm))\n    );\n    \n\n    const handleSelectVehicle = (vehicle) => {\n        onSelectVehicle(vehicle);\n    };\n\n    return (\n        <div style={{ margin: '30px', maxHeight: '600px', overflowY: 'auto' }}>\n            <h2>Lista de Vehículos</h2>\n            <input type=\"text\" placeholder=\"Buscar...\" onChange={handleSearchChange} style={{ marginBottom: '20px', width: '98%', height: '25px' }} />\n            <ul style={{ listStyle: 'none', padding: 0 }}>\n                {filteredVehicles.map(vehicle => (\n                    <li key={vehicle.id} style={{ margin: '10px 0', width: '100%', marginBottom: ' 8%', height: \"100px\" }}>\n                        <button onClick={() => handleSelectVehicle(vehicle)} style={{ padding: '5px 10px', border: '1px solid #ccc', borderRadius: '5px', cursor: 'pointer', backgroundColor: '#f0f0f0', display: 'flex', alignItems: 'center', width: '100%', background: 'white' }}>\n                            <div style={{ display: 'flex', flexDirection: 'row', width: '100%' }}>\n                                <div style={{ flex: '1', minWidth: '30%' }}>\n                                    <img src={imgCar} alt=\"Vehicle\" style={{ width: '100px', height: '100px' }} />\n                                </div>\n                                <div style={{ flex: '1', minWidth: '70%', paddingLeft: '10px', alignItems: 'flex-start', justifyContent: 'flex-start' }}>\n                                    <div style={{ fontSize: '18px', margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                        <strong>{vehicle.BRAND} {vehicle.MODEL} {vehicle.YEAR}</strong>\n                                    </div>\n                                    <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                        <strong>Color:</strong> {vehicle.COLOR}\n                                    </div>\n                                    <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                        <strong>VIN:</strong> {vehicle.vim}\n                                    </div>\n                                    <div style={{ margin: 0, textAlign: 'left', marginBottom: '5px' }}>\n                                        <strong>Seguro:</strong> {vehicle.seguro}\n                                    </div>\n                                </div>\n                            </div>\n                        </button>\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default VehicleList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}